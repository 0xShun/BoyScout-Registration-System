{% extends 'base.html' %}
{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/admin-enhanced.css' %}">
<style>
  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-10px); }
    75% { transform: translateX(10px); }
  }
  .error-icon-animated {
    animation: shake 0.5s ease-in-out;
  }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid py-4">
  <div class="row justify-content-center">
    <div class="col-lg-7 col-md-9">
      <div class="enhanced-card mt-5" style="border-top: 5px solid #dc2626;">
        <div class="card-body text-center py-5">
          <!-- Failed Icon -->
          <div class="mb-4 error-icon-animated">
            <div class="d-inline-flex align-items-center justify-content-center" 
                 style="background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%); width: 120px; height: 120px; border-radius: 50%; box-shadow: 0 8px 24px rgba(220, 38, 38, 0.3);">
              <i class="fas fa-times-circle text-white" style="font-size: 4rem;"></i>
            </div>
          </div>
          
          <h2 class="fw-bold mb-3" style="background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
            Payment Unsuccessful
          </h2>
          
          <p class="lead mb-4 text-muted">
            Your payment could not be completed. Don't worry, you haven't been charged.
          </p>
          
          <!-- Common Reasons Card -->
          <div class="alert-enhanced alert-enhanced-warning mx-auto mb-4" style="max-width: 550px; text-align: left;">
            <h6 class="fw-bold mb-3">
              <i class="fas fa-exclamation-triangle me-2"></i> Common reasons for failed payments:
            </h6>
            <div class="row g-3">
              <div class="col-md-6">
                <div class="d-flex align-items-start gap-2">
                  <i class="fas fa-times-circle text-danger mt-1" style="font-size: 1.2rem;"></i>
                  <div>
                    <strong style="color: #dc2626;">Payment Cancelled</strong>
                    <p class="mb-0 small text-muted mt-1">You cancelled the payment</p>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="d-flex align-items-start gap-2">
                  <i class="fas fa-wallet text-danger mt-1" style="font-size: 1.2rem;"></i>
                  <div>
                    <strong style="color: #dc2626;">Insufficient Funds</strong>
                    <p class="mb-0 small text-muted mt-1">Not enough balance in e-wallet</p>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="d-flex align-items-start gap-2">
                  <i class="fas fa-wifi text-danger mt-1" style="font-size: 1.2rem;"></i>
                  <div>
                    <strong style="color: #dc2626;">Connection Issue</strong>
                    <p class="mb-0 small text-muted mt-1">Network connection problem</p>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="d-flex align-items-start gap-2">
                  <i class="fas fa-clock text-danger mt-1" style="font-size: 1.2rem;"></i>
                  <div>
                    <strong style="color: #dc2626;">Payment Timeout</strong>
                    <p class="mb-0 small text-muted mt-1">Took too long to complete</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- What You Can Do Card -->
          <div class="alert-enhanced alert-enhanced-info mx-auto mb-4" style="max-width: 550px; text-align: left;">
            <h6 class="fw-bold mb-3">
              <i class="fas fa-lightbulb me-2"></i> What you can do:
            </h6>
            <div class="row g-2">
              <div class="col-12">
                <div class="d-flex align-items-start gap-2 p-2" style="background: white; border-radius: 8px;">
                  <div style="background: #10b981; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0; font-size: 0.85rem;">
                    1
                  </div>
                  <div>
                    <strong style="color: #065f46;">Check Your E-Wallet Balance</strong>
                    <p class="mb-0 small text-muted">Ensure you have sufficient funds</p>
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="d-flex align-items-start gap-2 p-2" style="background: white; border-radius: 8px;">
                  <div style="background: #3b82f6; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0; font-size: 0.85rem;">
                    2
                  </div>
                  <div>
                    <strong style="color: #1e40af;">Ensure Stable Internet</strong>
                    <p class="mb-0 small text-muted">Check your WiFi or mobile data connection</p>
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="d-flex align-items-start gap-2 p-2" style="background: white; border-radius: 8px;">
                  <div style="background: #8b5cf6; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0; font-size: 0.85rem;">
                    3
                  </div>
                  <div>
                    <strong style="color: #6d28d9;">Try Different Payment Method</strong>
                    <p class="mb-0 small text-muted">Switch between GCash, PayMaya, or GrabPay</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Action Buttons -->
          <div class="d-grid gap-2 mt-4">
            <a href="{% url 'payments:payment_submit' %}" class="btn-enhanced-primary" style="background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%); box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);">
              <i class="fas fa-redo me-2"></i> Try Payment Again
            </a>
            <a href="{% url 'payments:payment_list' %}" class="btn btn-outline-primary" style="border-radius: 12px; padding: 0.75rem 1.5rem; font-weight: 600;">
              <i class="fas fa-list me-2"></i> View Payment History
            </a>
            <a href="{% url 'home' %}" class="btn btn-outline-secondary" style="border-radius: 12px; padding: 0.75rem 1.5rem; font-weight: 600;">
              <i class="fas fa-home me-2"></i> Go to Dashboard
            </a>
          </div>
          
          <!-- Security Footer -->
          <div class="mt-5 pt-4" style="border-top: 2px solid #f3f4f6;">
            <div class="alert-enhanced alert-enhanced-success mb-3" style="padding: 1rem;">
              <i class="fas fa-shield-alt me-2"></i> 
              <strong>Good News:</strong> No charges were made to your account
            </div>
            <p class="text-muted small mb-0">
              <i class="fas fa-question-circle"></i> Still having trouble? Contact your administrator or email support for assistance.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
