{% extends 'base_sidebar.html' %}
{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/admin-enhanced.css' %}">
{% endblock %}

{% block title %}Announcements{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <!-- Page Header -->
    <div class="page-header">
      <h2><i class="fas fa-bullhorn"></i> Announcements</h2>
      <p>View and manage all scout announcements</p>
    </div>
    
    <!-- Header Actions -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h4 class="mb-0">
            <i class="fas fa-list me-2"></i> All Announcements
            <span class="badge bg-primary ms-2">{{ announcements|length }}</span>
        </h4>
        {% if user.is_admin or user.is_leader %}
        <a href="{% url 'announcements:announcement_create' %}" class="btn-enhanced-primary">
            <i class="fas fa-plus-circle me-2"></i> Create Announcement
        </a>
        {% endif %}
    </div>
    
    {% if announcements %}
    <!-- Announcements Grid -->
    <div class="row g-3">
        {% for announcement in announcements %}
        <div class="col-lg-4 col-md-6">
            <div class="announcement-card">
                <div class="announcement-card-body">
                    <!-- Announcement Title -->
                    <h5 class="announcement-title">
                        {{ announcement.title }}
                    </h5>
                    
                    <!-- Announcement Message Preview -->
                    <p class="announcement-preview">
                        {{ announcement.message|truncatewords:30 }}
                    </p>
                    
                    <!-- Announcement Metadata -->
                    <div class="announcement-meta">
                        <div class="meta-item">
                            <i class="fas fa-calendar"></i>
                            <span>Posted: {{ announcement.date_posted|date:"M d, Y" }}</span>
                        </div>
                        
                        {% if announcement.recipients.all %}
                        <div class="meta-item">
                            <i class="fas fa-users"></i>
                            <span>Recipients: {{ announcement.recipients.count }} user{% if announcement.recipients.count > 1 %}s{% endif %}</span>
                        </div>
                        {% endif %}
                    </div>
                    
                    <!-- View Button -->
                    <a href="{% url 'announcements:announcement_detail' announcement.id %}" class="announcement-btn">
                        <i class="fas fa-eye me-2"></i> View Details
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <!-- Empty State -->
    <div class="empty-state">
        <i class="fas fa-bullhorn"></i>
        <h4>No Announcements Yet</h4>
        <p class="text-muted mb-4">Start keeping everyone informed by creating your first announcement.</p>
    </div>
    {% endif %}
</div>

<style>
    /* Flat Design for Announcements */
    .announcement-card {
        background: white;
        border: 1px solid #e5e7eb;
        border-radius: 8px;
        padding: 24px;
        height: 100%;
        display: flex;
        flex-direction: column;
    }
    
    .announcement-card-body {
        display: flex;
        flex-direction: column;
        height: 100%;
    }
    
    .announcement-title {
        color: #1e3a8a;
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 16px;
        line-height: 1.5;
    }
    
    .announcement-preview {
        color: #6b7280;
        font-size: 0.95rem;
        line-height: 1.6;
        margin-bottom: 20px;
        flex-grow: 1;
    }
    
    .announcement-meta {
        border-top: 1px solid #f3f4f6;
        padding-top: 16px;
        margin-bottom: 20px;
    }
    
    .meta-item {
        display: flex;
        align-items: center;
        gap: 10px;
        color: #4b5563;
        font-size: 0.875rem;
        margin-bottom: 10px;
    }
    
    .meta-item:last-child {
        margin-bottom: 0;
    }
    
    .meta-item i {
        color: #3b82f6;
        width: 16px;
        text-align: center;
    }
    
    .announcement-btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        padding: 12px 24px;
        background: #1e3a8a;
        color: white;
        text-decoration: none;
        border-radius: 6px;
        font-weight: 500;
        font-size: 0.95rem;
    }
    
    .announcement-btn:hover {
        background: #1e40af;
        color: white;
    }
    
    /* Empty State */
    .empty-state {
        text-align: center;
        padding: 80px 24px;
    }
    
    .empty-state i {
        font-size: 4rem;
        color: #d1d5db;
        margin-bottom: 24px;
    }
    
    .empty-state h4 {
        color: #1f2937;
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 12px;
    }
    
    .empty-state p {
        color: #6b7280;
        font-size: 1rem;
    }
</style>
{% endblock %}
