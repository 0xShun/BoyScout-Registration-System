{% extends 'base_sidebar.html' %}
{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/admin-enhanced.css' %}">
{% endblock %}

{% block content %}
<div class="container py-4">
  {# Page Header #}
  <div class="page-header mb-4">
    <h2><i class="fas {% if form.instance.pk %}fa-edit{% else %}fa-plus-circle{% endif %}"></i> {% if form.instance.pk %}Edit Event{% else %}Create Event{% endif %}</h2>
    <p>{% if form.instance.pk %}Update{% else %}Add{% endif %} event information and details</p>
  </div>
  
  <div class="row justify-content-center">
    <div class="col-lg-10">
      <div class="enhanced-card">
        <div class="card-body">
          <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            
            {# Basic Event Information #}
            <div class="form-section">
              <div class="form-section-title">
                <i class="fas fa-info-circle"></i> Basic Event Information
              </div>
              
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="{{ form.title.id_for_label }}" class="enhanced-form-label">
                      <i class="fas fa-heading"></i> Event Title *
                    </label>
                    {{ form.title }}
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="{{ form.location.id_for_label }}" class="enhanced-form-label">
                      <i class="fas fa-map-marker-alt"></i> Location *
                    </label>
                    {{ form.location }}
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="{{ form.date.id_for_label }}" class="enhanced-form-label">
                      <i class="fas fa-calendar-alt"></i> Date *
                    </label>
                    {{ form.date }}
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="{{ form.time.id_for_label }}" class="enhanced-form-label">
                      <i class="fas fa-clock"></i> Time *
                    </label>
                    {{ form.time }}
                  </div>
                </div>
              </div>

              <div class="mb-3">
                <label for="{{ form.description.id_for_label }}" class="enhanced-form-label">
                  <i class="fas fa-align-left"></i> Description *
                </label>
                {{ form.description }}
                <div class="form-text">
                  <i class="fas fa-info-circle"></i> Provide a detailed description of the event
                </div>
              </div>
            </div>

            {# Payment Information #}
            <div class="form-section">
              <div class="form-section-title">
                <i class="fas fa-money-bill-wave"></i> Payment Information
              </div>
              
              <div class="alert-enhanced alert-enhanced-info mb-3">
                <i class="fas fa-lightbulb me-2"></i>
                <strong>Tip:</strong> Leave the event fee empty if no payment is required for this event.
              </div>
              
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    {{ form.payment_amount }}
                    <div class="form-text">Leave empty if no payment is required</div>
                  </div>
                </div>
              </div>
            </div>

            {# Event Banner #}
            <div class="form-section">
              <div class="form-section-title">
                <i class="fas fa-image"></i> Event Banner
              </div>
              
              <div class="mb-3">
                {{ form.banner }}
                <div class="form-text">
                  <i class="fas fa-info-circle"></i> Recommended size: 1200x400 pixels (optional)
                </div>
                
                {% if form.instance.banner %}
                  <div class="mt-3">
                    <label class="fw-bold mb-2">Current Banner:</label><br>
                    <img src="{{ form.instance.banner.url }}" alt="Event Banner" class="img-fluid rounded" style="max-width: 400px; border: 2px solid #e5e7eb;">
                  </div>
                {% endif %}
              </div>
            </div>

            {# Submit Buttons #}
            <div class="d-flex gap-2 justify-content-end pt-3 border-top">
              <a href="{% url 'events:event_list' %}" class="btn btn-outline-secondary">
                <i class="fas fa-times me-2"></i> Cancel
              </a>
              <button type="submit" class="btn-enhanced-success" style="min-width: 200px;">
                <i class="fas {% if form.instance.pk %}fa-save{% else %}fa-plus-circle{% endif %} me-2"></i>
                {% if form.instance.pk %}Update{% else %}Create{% endif %} Event
              </button>
            </div>
          </form>
        </div>
      </div>
      
      {# Quick Tips Card #}
      <div class="enhanced-card mt-4">
        <div class="enhanced-card-header">
          <h5><i class="fas fa-lightbulb me-2"></i> Event Creation Tips</h5>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-md-6">
              <div class="p-3" style="background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); border-radius: 12px; border-left: 4px solid #3b82f6;">
                <h6 class="fw-bold mb-2" style="color: #1e3a8a;">
                  <i class="fas fa-calendar-check me-2"></i> Plan Ahead
                </h6>
                <small>Create events well in advance to give scouts time to register and prepare.</small>
              </div>
            </div>
            <div class="col-md-6">
              <div class="p-3" style="background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); border-radius: 12px; border-left: 4px solid #10b981;">
                <h6 class="fw-bold mb-2" style="color: #065f46;">
                  <i class="fas fa-info-circle me-2"></i> Be Descriptive
                </h6>
                <small>Include all important details like what to bring, dress code, and special instructions.</small>
              </div>
            </div>
            <div class="col-md-6">
              <div class="p-3" style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-radius: 12px; border-left: 4px solid #fbbf24;">
                <h6 class="fw-bold mb-2" style="color: #92400e;">
                  <i class="fas fa-money-bill-wave me-2"></i> Set Clear Fees
                </h6>
                <small>If payment is required, clearly state the amount and what it covers.</small>
              </div>
            </div>
            <div class="col-md-6">
              <div class="p-3" style="background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%); border-radius: 12px; border-left: 4px solid #dc2626;">
                <h6 class="fw-bold mb-2" style="color: #7f1d1d;">
                  <i class="fas fa-image me-2"></i> Add a Banner
                </h6>
                <small>A good event banner makes your event more attractive and professional.</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Enhance form controls
    ['id_title', 'id_location', 'id_date', 'id_time', 'id_description', 'id_payment_amount', 'id_banner'].forEach(function(id) {
      var element = document.getElementById(id);
      if (element) {
        if (element.tagName === 'TEXTAREA') {
          element.classList.add('form-control', 'enhanced-form-control');
          element.style.minHeight = '120px';
        } else if (element.tagName === 'INPUT') {
          element.classList.add('form-control', 'enhanced-form-control');
        }
      }
    });
  });
</script>
{% endblock %}
